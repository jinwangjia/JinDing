@model WebApplication.Models.FunctionUpdateModel

@{
    ViewBag.Title = "Update";
}


@{
    ViewBag.Title = "Update";

    IList<SelectListItem> funList = Model.Functions.Select(o => new SelectListItem()
    {
        Value = o.FunctionId.ToString(),
        Text = o.Name
    }).ToList();

    funList.Insert(0, new SelectListItem()
    {
        Value = "0",
        Text = "顶级功能"
    });

    IList<SelectListItem> pages = Model.Pages.Select(o => new SelectListItem()
    {
        Value = o,
        Text = o
    }).ToList();

}

<div class="easyui-layout" data-options="fit:true">
	<div data-options="region:'center'" style="padding:10px;">

@using (Html.BeginForm("Update", "Function", FormMethod.Post, new { id = "Update", autocomplete = "off" }))
{
    @Html.HiddenFor(o => o.FunctionId)

    <table width="100%" border="0" align="center" cellpadding="5" cellspacing="1">
        <tr>
            <td width="80" align="right" bgcolor="#F6F6F6">@Html.LabelFor(o=>o.ParentId)</td>
            <td align="left" bgcolor="#F6F6F6">
                @Html.DropDownListFor(m => m.ParentId, funList)
            </td>
        </tr>
        <tr>
            <td align="right" bgcolor="#F6F6F6">@Html.LabelFor(o => o.Name)</td>
            <td align="left" bgcolor="#F6F6F6">
                @Html.TextBoxFor(m => m.Name)
                @Html.ValidationMessageFor(m => m.Name)
            </td>
        </tr>
        <tr>
            <td align="right" bgcolor="#F6F6F6">@Html.LabelFor(o => o.Icon)</td>
            <td align="left" bgcolor="#F6F6F6">
                @Html.TextBoxFor(m => m.Icon)
                @Html.ValidationMessageFor(m => m.Icon)
            </td>
        </tr>
        <tr>
            <td align="right" bgcolor="#F6F6F6">@Html.LabelFor(o => o.Page)</td>
            <td align="left" bgcolor="#F6F6F6">
                @Html.DropDownListFor(m => m.Page, pages)
                @Html.ValidationMessageFor(m => m.Page)
            </td>
        </tr>
        <tr>
            <td align="right" bgcolor="#F6F6F6">@Html.LabelFor(o => o.Display)</td>
            <td align="left" bgcolor="#F6F6F6">
                @Html.CheckBoxFor(m => m.Display)
            </td>
        </tr>
        <tr>
            <td align="right" bgcolor="#F6F6F6">@Html.LabelFor(o => o.Postion)</td>
            <td align="left" bgcolor="#F6F6F6">
                @Html.TextBoxFor(m => m.Postion)
            </td>
        </tr>
        <tr>
            <td align="right" bgcolor="#F6F6F6"></td>
            <td align="left" bgcolor="#F6F6F6">
                <span class="f12red">@ViewBag.Message</span>
            </td>
        </tr>
    </table>


}

	</div>
	<div data-options="region:'south',border:false" style="text-align:right;padding:5px 5px 5px 5px;">
		<a class="easyui-linkbutton" data-options="iconCls:'icon-ok'" href="javascript:void(0)" onclick="javascript:submit1()" style="width:80px">确定</a>
		@*<a class="easyui-linkbutton" data-options="iconCls:'icon-cancel'" href="javascript:void(0)" onclick="javascript:alert('cancel')" style="width:80px">取消</a>*@
	</div>
</div>


    <script type="text/javascript">

        function submit1() {
            $.ajax({
                url: "/Function/Update",
                type: "Post",
                data: $("#Update").serialize(),
                dataType: "json",
                success: function (data) {
                    if (data == 1) {
                        window.parent.frameReturnUpdateTrue();
                    }
                    else {
                        window.parent.frameReturnFalse();
                    }
                }
            });
        }

    </script>